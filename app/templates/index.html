{% extends "landing/base_landing.html" %}

{% block title %}LuxeraRD | Redefiniendo la Excelencia Tecnológica{% endblock %}

{% block meta_description %}Descubre las mejores laptops y equipos de computación en República Dominicana. Garantía oficial, soporte técnico especializado y las mejores marcas del mercado.{% endblock %}

{% block extra_css %}
<!-- Fuentes Premium: Satoshi (Moderna) y Clash Display (Bold) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Syne:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
    /* =========================================
       1. VARIABLES & CORE SETTINGS (Mejorado)
       ========================================= */
    :root {
        /* Paleta refinada - Evitando el púrpura genérico */
        --bg-deep: #fafafa;
        --bg-surface: #f0f0f0;
        --bg-card: #ffffff;
        --bg-elevated: #ffffff;

        --text-primary: #0a0a0a;
        --text-secondary: #3d3d3d;
        --text-muted: #737373;
        --text-subtle: #a3a3a3;

        /* Colores de acento más sofisticados */
        --accent-primary: #0066ff;
        --accent-secondary: #00d4aa;
        --accent-tertiary: #ff6b35;
        --accent-gradient: linear-gradient(135deg, #0066ff 0%, #00d4aa 100%);
        --accent-glow: 0 0 60px rgba(0, 102, 255, 0.15);

        --border-light: rgba(0, 0, 0, 0.06);
        --border-medium: rgba(0, 0, 0, 0.1);
        --border-hover: rgba(0, 0, 0, 0.15);

        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
        --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 12px 40px rgba(0, 0, 0, 0.08);
        --shadow-xl: 0 24px 60px rgba(0, 0, 0, 0.12);

        /* Tipografía distintiva */
        --font-body: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
        --font-heading: 'Syne', sans-serif;

        /* Easing functions */
        --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
        --ease-out-quart: cubic-bezier(0.25, 1, 0.5, 1);
        --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);

        /* Variables dinámicas para el carrusel */
        --dynamic-gradient: linear-gradient(135deg, #0066ff 0%, #00d4aa 100%);
        --dynamic-accent: #0066ff;
        --dynamic-accent-rgb: 0, 102, 255;
        --dynamic-aurora1: rgba(0, 102, 255, 0.08);
        --dynamic-aurora2: rgba(0, 212, 170, 0.08);
    }

    [data-theme="dark"] {
        --bg-deep: #050505;
        --bg-surface: #0a0a0a;
        --bg-card: #111111;
        --bg-elevated: #181818;

        --text-primary: #fafafa;
        --text-secondary: #d4d4d4;
        --text-muted: #737373;
        --text-subtle: #525252;

        --accent-primary: #3b82f6;
        --accent-secondary: #10b981;
        --accent-tertiary: #f97316;
        --accent-gradient: linear-gradient(135deg, #3b82f6 0%, #10b981 100%);
        --accent-glow: 0 0 80px rgba(59, 130, 246, 0.25);

        --border-light: rgba(255, 255, 255, 0.06);
        --border-medium: rgba(255, 255, 255, 0.1);
        --border-hover: rgba(255, 255, 255, 0.18);

        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
        --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.3);
        --shadow-lg: 0 12px 40px rgba(0, 0, 0, 0.4);
        --shadow-xl: 0 24px 60px rgba(0, 0, 0, 0.5);

        --dynamic-gradient: linear-gradient(135deg, #3b82f6 0%, #10b981 100%);
        --dynamic-accent: #3b82f6;
        --dynamic-accent-rgb: 59, 130, 246;
        --dynamic-aurora1: rgba(59, 130, 246, 0.12);
        --dynamic-aurora2: rgba(16, 185, 129, 0.1);
    }

    /* =========================================
       2. BASE STYLES
       ========================================= */
    *, *::before, *::after {
        box-sizing: border-box;
    }

    html {
        scroll-behavior: smooth;
    }

    body {
        font-family: var(--font-body);
        background-color: var(--bg-deep);
        color: var(--text-primary);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        transition: background-color 0.5s var(--ease-out-expo), color 0.5s var(--ease-out-expo);
        overflow-x: hidden;
        line-height: 1.6;
    }

    /* =========================================
       3. VISUAL EFFECTS & BACKGROUNDS
       ========================================= */

    /* Noise texture overlay */
    .noise-overlay {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 9999;
        opacity: 0.02;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    }

    /* Grid pattern */
    .grid-pattern {
        position: fixed;
        inset: 0;
        pointer-events: none;
        opacity: 0.03;
        background-image:
            linear-gradient(var(--text-primary) 1px, transparent 1px),
            linear-gradient(90deg, var(--text-primary) 1px, transparent 1px);
        background-size: 100px 100px;
        z-index: 0;
        mask-image: radial-gradient(ellipse 80% 80% at 50% 50%, black 40%, transparent 100%);
    }

    [data-theme="dark"] .grid-pattern {
        opacity: 0.04;
    }

    /* Aurora container */
    .aurora-container {
        position: fixed;
        inset: 0;
        z-index: -1;
        overflow: hidden;
        pointer-events: none;
    }

    .aurora-blob {
        position: absolute;
        border-radius: 50%;
        filter: blur(120px);
        opacity: 0.5;
        transition: all 1.5s var(--ease-out-expo);
        will-change: transform, background;
    }

    .aurora-blob-1 {
        width: 50vw;
        height: 50vw;
        top: -15%;
        left: -10%;
        background: var(--dynamic-aurora1);
    }

    .aurora-blob-2 {
        width: 40vw;
        height: 40vw;
        bottom: -15%;
        right: -5%;
        background: var(--dynamic-aurora2);
    }

    /* Floating particles */
    .particles-container {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 1;
    }

    .particle {
        position: absolute;
        background: var(--text-primary);
        border-radius: 50%;
        opacity: 0.06;
        animation: float-particle var(--duration) var(--delay) infinite ease-in-out;
    }

    @keyframes float-particle {
        0%, 100% {
            transform: translate(0, 0) scale(1);
            opacity: 0.06;
        }
        50% {
            transform: translate(var(--tx), var(--ty)) scale(1.2);
            opacity: 0.12;
        }
    }

    /* =========================================
       4. CUSTOM CURSOR
       ========================================= */
    .cursor {
        position: fixed;
        pointer-events: none;
        z-index: 10001;
        mix-blend-mode: difference;
    }

    .cursor-dot {
        width: 8px;
        height: 8px;
        background: white;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: transform 0.15s var(--ease-out-expo);
    }

    .cursor-ring {
        position: absolute;
        width: 40px;
        height: 40px;
        border: 1px solid rgba(255, 255, 255, 0.5);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.2s var(--ease-out-expo);
    }

    .cursor.hovering .cursor-dot {
        transform: translate(-50%, -50%) scale(2);
    }

    .cursor.hovering .cursor-ring {
        transform: translate(-50%, -50%) scale(1.5);
        opacity: 0;
    }

    @media (hover: none) {
        .cursor { display: none; }
    }

    /* =========================================
       5. CONTAINERS & UTILITIES
       ========================================= */
    .container-xl {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 clamp(1rem, 4vw, 3rem);
    }

    .section-padding {
        padding: clamp(4rem, 10vw, 8rem) 0;
    }

    .text-gradient {
        background: var(--accent-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .dynamic-gradient {
        background: var(--dynamic-gradient) !important;
        -webkit-background-clip: text !important;
        -webkit-text-fill-color: transparent !important;
        background-clip: text !important;
        transition: all 0.8s var(--ease-out-expo);
    }

    /* =========================================
       6. BUTTONS
       ========================================= */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        padding: 1rem 2rem;
        font-family: var(--font-heading);
        font-weight: 600;
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        border-radius: 100px;
        border: none;
        cursor: pointer;
        text-decoration: none;
        transition: all 0.4s var(--ease-out-expo);
        position: relative;
        overflow: hidden;
    }

    .btn::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0));
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .btn:hover::before {
        opacity: 1;
    }

    .btn-primary {
        background: var(--dynamic-accent);
        color: white;
        box-shadow: 0 4px 20px rgba(var(--dynamic-accent-rgb), 0.3);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px rgba(var(--dynamic-accent-rgb), 0.4);
    }

    .btn-secondary {
        background: transparent;
        color: var(--text-primary);
        border: 1px solid var(--border-medium);
    }

    .btn-secondary:hover {
        background: var(--bg-surface);
        border-color: var(--border-hover);
        transform: translateY(-2px);
    }

    .btn-icon {
        width: 48px;
        height: 48px;
        padding: 0;
        border-radius: 50%;
        background: var(--bg-card);
        color: var(--text-primary);
        border: 1px solid var(--border-light);
        box-shadow: var(--shadow-sm);
    }

    .btn-icon:hover {
        background: var(--dynamic-accent);
        color: white;
        border-color: var(--dynamic-accent);
        transform: scale(1.1);
    }

    /* =========================================
       7. BADGES
       ========================================= */
    .badge {
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
        padding: 0.375rem 0.875rem;
        font-size: 0.6875rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        border-radius: 100px;
        backdrop-filter: blur(12px);
    }

    .badge-new {
        background: rgba(0, 102, 255, 0.1);
        color: var(--accent-primary);
        border: 1px solid rgba(0, 102, 255, 0.2);
    }

    .badge-hot {
        background: rgba(255, 107, 53, 0.1);
        color: var(--accent-tertiary);
        border: 1px solid rgba(255, 107, 53, 0.2);
    }

    .badge-featured {
        background: rgba(0, 212, 170, 0.1);
        color: var(--accent-secondary);
        border: 1px solid rgba(0, 212, 170, 0.2);
    }

    .badge-limited {
        background: rgba(239, 68, 68, 0.1);
        color: #ef4444;
        border: 1px solid rgba(239, 68, 68, 0.2);
    }

    /* =========================================
       8. HERO SECTION
       ========================================= */
    .hero {
        min-height: 100vh;
        position: relative;
        display: flex;
        align-items: center;
        padding-top: 100px;
        overflow: hidden;
    }

    .hero-inner {
        position: relative;
        z-index: 10;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: clamp(2rem, 5vw, 4rem);
        align-items: center;
        width: 100%;
    }

    /* Hero Text Side */
    .hero-content {
        position: relative;
        padding-left: clamp(0, 3vw, 2rem);
    }

    .hero-slides {
        position: relative;
        min-height: 420px;
    }

    .hero-slide {
        position: absolute;
        inset: 0;
        opacity: 0;
        visibility: hidden;
        transition: all 0.8s var(--ease-out-expo);
    }

    .hero-slide.active {
        position: relative;
        opacity: 1;
        visibility: visible;
    }

    .hero-eyebrow {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        padding: 0.5rem 1rem;
        background: var(--bg-surface);
        border: 1px solid var(--border-light);
        border-radius: 100px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--text-muted);
    }

    .hero-eyebrow-dot {
        width: 6px;
        height: 6px;
        background: var(--dynamic-accent);
        border-radius: 50%;
        animation: pulse-dot 2s infinite;
    }

    @keyframes pulse-dot {
        0%, 100% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.5; transform: scale(1.2); }
    }

    .hero-title {
        font-family: var(--font-heading);
        font-size: clamp(2.5rem, 5vw, 4.5rem);
        font-weight: 800;
        line-height: 1.05;
        letter-spacing: -0.03em;
        margin-bottom: 1.5rem;
    }

    .hero-title-line {
        display: block;
        overflow: hidden;
    }

    .hero-title-text {
        display: inline-block;
    }

    .hero-description {
        font-size: clamp(1rem, 1.25vw, 1.125rem);
        color: var(--text-secondary);
        line-height: 1.7;
        max-width: 480px;
        margin-bottom: 2.5rem;
        padding-left: 1.5rem;
        border-left: 2px solid var(--border-light);
    }

    .hero-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
    }

    /* Hero Visual Side */
    .hero-visual {
        position: relative;
        height: 70vh;
        min-height: 500px;
        display: flex;
        align-items: center;
        justify-content: center;
        perspective: 2000px;
    }

    .hero-rings {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: none;
    }

    .hero-ring {
        position: absolute;
        border-radius: 50%;
        border: 1px solid var(--border-light);
    }

    .hero-ring-1 {
        width: min(550px, 80%);
        height: min(550px, 80%);
        animation: rotate-slow 80s linear infinite;
    }

    .hero-ring-2 {
        width: min(400px, 60%);
        height: min(400px, 60%);
        border-style: dashed;
        animation: rotate-slow 60s linear infinite reverse;
    }

    @keyframes rotate-slow {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    /* Product Card in Hero */
    .hero-product {
        position: relative;
        z-index: 10;
        width: 100%;
        max-width: 650px;
    }

    .hero-product-card {
        position: absolute;
        inset: 0;
        opacity: 0;
        visibility: hidden;
        transform: scale(0.95) rotateY(10deg);
        transition: all 0.8s var(--ease-out-expo);
    }

    .hero-product-card.active {
        position: relative;
        opacity: 1;
        visibility: visible;
        transform: scale(1) rotateY(0);
    }

    .hero-product-image {
        width: 100%;
        height: auto;
        filter: drop-shadow(0 40px 80px rgba(0, 0, 0, 0.15));
        transition: transform 0.4s var(--ease-out-expo);
    }

    [data-theme="dark"] .hero-product-image {
        filter: drop-shadow(0 40px 80px rgba(0, 0, 0, 0.4));
    }

    /* Floating Specs Card */
    .specs-card {
        position: absolute;
        left: -2rem;
        top: 50%;
        transform: translateY(-50%);
        z-index: 20;
        width: 200px;
        padding: 1.25rem;
        background: var(--bg-card);
        border: 1px solid var(--border-light);
        border-radius: 1rem;
        box-shadow: var(--shadow-lg);
        backdrop-filter: blur(20px);
    }

    [data-theme="dark"] .specs-card {
        background: rgba(17, 17, 17, 0.8);
    }

    .specs-card-header {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding-bottom: 0.875rem;
        margin-bottom: 0.875rem;
        border-bottom: 1px solid var(--border-light);
    }

    .specs-card-icon {
        width: 2.25rem;
        height: 2.25rem;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--dynamic-accent);
        color: white;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        transition: background 0.8s var(--ease-out-expo);
    }

    .specs-card-title {
        font-family: var(--font-heading);
        font-size: 0.875rem;
        font-weight: 700;
    }

    .specs-card-subtitle {
        font-size: 0.625rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.1em;
    }

    .specs-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.5rem;
    }

    .spec-item {
        padding: 0.5rem;
        background: var(--bg-surface);
        border-radius: 0.5rem;
    }

    .spec-label {
        font-size: 0.5625rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 0.125rem;
    }

    .spec-value {
        font-family: var(--font-heading);
        font-size: 0.8125rem;
        font-weight: 700;
    }

    /* Floating Price Tag */
    .price-tag {
        position: absolute;
        right: -1.5rem;
        bottom: 20%;
        z-index: 20;
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 0.875rem 1.25rem;
        background: var(--bg-card);
        border: 1px solid var(--border-light);
        border-radius: 100px;
        box-shadow: var(--shadow-lg);
        backdrop-filter: blur(20px);
    }

    [data-theme="dark"] .price-tag {
        background: rgba(17, 17, 17, 0.8);
    }

    .price-tag-label {
        font-size: 0.625rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.1em;
    }

    .price-tag-value {
        font-family: var(--font-heading);
        font-size: 1.25rem;
        font-weight: 800;
    }

    .price-tag-indicator {
        position: relative;
        width: 10px;
        height: 10px;
    }

    .price-tag-indicator::before {
        content: '';
        position: absolute;
        inset: 0;
        background: #10b981;
        border-radius: 50%;
        animation: ping-indicator 2s infinite;
    }

    .price-tag-indicator::after {
        content: '';
        position: absolute;
        inset: 2px;
        background: #10b981;
        border-radius: 50%;
        box-shadow: 0 0 10px #10b981;
    }

    @keyframes ping-indicator {
        0% { transform: scale(1); opacity: 0.75; }
        100% { transform: scale(2); opacity: 0; }
    }

    /* =========================================
       9. CAROUSEL CONTROLS
       ========================================= */
    .carousel-controls {
        display: flex;
        align-items: center;
        gap: 1.5rem;
        margin-top: 3rem;
    }

    .carousel-dots {
        display: flex;
        gap: 0.5rem;
    }

    .carousel-dot {
        position: relative;
        width: 8px;
        height: 4px;
        background: var(--border-medium);
        border-radius: 100px;
        cursor: pointer;
        overflow: hidden;
        transition: all 0.4s var(--ease-out-expo);
    }

    .carousel-dot.active {
        width: 48px;
        background: var(--border-light);
    }

    .carousel-dot-fill {
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 0%;
        background: var(--dynamic-accent);
        border-radius: 100px;
        transition: width 0.1s linear, background 0.8s var(--ease-out-expo);
    }

    .carousel-nav {
        display: flex;
        gap: 0.5rem;
    }

    .carousel-btn {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-card);
        border: 1px solid var(--border-light);
        border-radius: 50%;
        color: var(--text-primary);
        cursor: pointer;
        transition: all 0.3s var(--ease-out-expo);
    }

    .carousel-btn:hover {
        background: var(--dynamic-accent);
        color: white;
        border-color: var(--dynamic-accent);
        transform: scale(1.1);
    }

    .carousel-btn svg {
        width: 16px;
        height: 16px;
    }

    /* Lateral Navigation */
    .lateral-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        z-index: 30;
    }

    .lateral-nav-prev { left: 1rem; }
    .lateral-nav-next { right: 1rem; }

    .lateral-nav-btn {
        width: 56px;
        height: 56px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-card);
        border: 1px solid var(--border-light);
        border-radius: 50%;
        color: var(--text-primary);
        cursor: pointer;
        transition: all 0.4s var(--ease-out-expo);
        backdrop-filter: blur(10px);
    }

    .lateral-nav-btn:hover {
        background: var(--text-primary);
        color: var(--bg-deep);
        transform: translateY(-50%) scale(1.1);
    }

    .lateral-nav-btn svg {
        width: 20px;
        height: 20px;
        transition: transform 0.3s var(--ease-out-expo);
    }

    .lateral-nav-btn:hover svg {
        transform: translateX(var(--translate-direction));
    }

    .lateral-nav-prev .lateral-nav-btn { --translate-direction: -3px; }
    .lateral-nav-next .lateral-nav-btn { --translate-direction: 3px; }

    /* =========================================
       10. MARQUEE
       ========================================= */
    .marquee {
        position: absolute;
        bottom: 80px;
        left: 0;
        width: 100%;
        overflow: hidden;
        pointer-events: none;
        opacity: 0.02;
    }

    [data-theme="dark"] .marquee {
        opacity: 0.03;
    }

    .marquee-track {
        display: flex;
        gap: 4rem;
        white-space: nowrap;
        animation: marquee 100s linear infinite;
    }

    .marquee-text {
        font-family: var(--font-heading);
        font-size: clamp(6rem, 12vw, 10rem);
        font-weight: 900;
        text-transform: uppercase;
        letter-spacing: -0.05em;
        color: transparent;
        -webkit-text-stroke: 1px var(--text-primary);
    }

    @keyframes marquee {
        from { transform: translateX(0); }
        to { transform: translateX(-50%); }
    }

    /* =========================================
       11. PRODUCTS SECTION
       ========================================= */
    .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 1.5rem;
    }

    .product-card {
        position: relative;
        background: var(--bg-card);
        border: 1px solid var(--border-light);
        border-radius: 1.5rem;
        padding: 1.5rem;
        transition: all 0.5s var(--ease-out-expo);
        overflow: hidden;
    }

    .product-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--accent-gradient);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.5s var(--ease-out-expo);
    }

    .product-card:hover {
        transform: translateY(-8px);
        border-color: var(--border-hover);
        box-shadow: var(--shadow-xl);
    }

    .product-card:hover::before {
        transform: scaleX(1);
    }

    .product-card-badge {
        position: absolute;
        top: 1.25rem;
        left: 1.25rem;
        z-index: 10;
    }

    .product-image-container {
        position: relative;
        height: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1.25rem;
        background: var(--bg-surface);
        border-radius: 1rem;
        overflow: hidden;
    }

    .product-image {
        max-width: 85%;
        max-height: 85%;
        object-fit: contain;
        transition: transform 0.6s var(--ease-out-expo);
    }

    .product-card:hover .product-image {
        transform: scale(1.08) translateY(-4px);
    }

    .product-info {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .product-brand {
        font-size: 0.6875rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.08em;
        margin-bottom: 0.375rem;
    }

    .product-name {
        font-family: var(--font-heading);
        font-size: 1.125rem;
        font-weight: 700;
        margin-bottom: 1rem;
        line-height: 1.3;
    }

    .product-specs {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        padding-top: 1rem;
        margin-bottom: 1.25rem;
        border-top: 1px solid var(--border-light);
    }

    .product-spec {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.5rem;
        border-radius: 0.5rem;
        transition: background 0.3s ease;
    }

    .product-card:hover .product-spec {
        background: var(--bg-surface);
    }

    .product-spec-icon {
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-surface);
        border: 1px solid var(--border-light);
        border-radius: 0.375rem;
        font-size: 0.75rem;
        color: var(--accent-primary);
    }

    .product-spec-text {
        font-size: 0.8125rem;
        font-weight: 500;
        color: var(--text-secondary);
    }

    .product-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 1rem;
        margin-top: auto;
        border-top: 1px solid var(--border-light);
    }

    .product-price {
        display: flex;
        flex-direction: column;
    }

    .product-price-old {
        font-size: 0.8125rem;
        color: var(--text-muted);
        text-decoration: line-through;
    }

    .product-price-current {
        font-family: var(--font-heading);
        font-size: 1.375rem;
        font-weight: 800;
    }

    .product-price-currency {
        font-size: 0.75rem;
        font-weight: 600;
        color: var(--text-muted);
    }

    .product-action {
        width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-surface);
        border: 1px solid var(--border-light);
        border-radius: 50%;
        color: var(--text-primary);
        text-decoration: none;
        transition: all 0.3s var(--ease-out-expo);
    }

    .product-action:hover {
        background: var(--accent-primary);
        color: white;
        border-color: var(--accent-primary);
        transform: rotate(45deg);
    }

    /* =========================================
       12. FEATURES SECTION
       ========================================= */
    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 1.5rem;
    }

    .feature-card {
        position: relative;
        padding: 2rem;
        background: var(--bg-card);
        border: 1px solid var(--border-light);
        border-radius: 1.5rem;
        text-align: center;
        transition: all 0.5s var(--ease-out-expo);
        overflow: hidden;
    }

    .feature-card::before {
        content: '';
        position: absolute;
        inset: 0;
        background: var(--accent-gradient);
        opacity: 0;
        transition: opacity 0.5s ease;
    }

    .feature-card:hover {
        transform: translateY(-6px);
        border-color: transparent;
        box-shadow: var(--shadow-lg);
    }

    .feature-card:hover::before {
        opacity: 0.03;
    }

    .feature-icon {
        position: relative;
        width: 64px;
        height: 64px;
        margin: 0 auto 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-surface);
        border: 1px solid var(--border-light);
        border-radius: 1rem;
        font-size: 1.5rem;
        color: var(--accent-primary);
        transition: all 0.4s var(--ease-out-expo);
    }

    .feature-card:hover .feature-icon {
        background: var(--accent-primary);
        color: white;
        border-color: var(--accent-primary);
        transform: scale(1.1);
    }

    .feature-title {
        font-family: var(--font-heading);
        font-size: 1.125rem;
        font-weight: 700;
        margin-bottom: 0.75rem;
    }

    .feature-description {
        font-size: 0.9375rem;
        color: var(--text-secondary);
        line-height: 1.6;
    }

    /* =========================================
       13. CATEGORIES SECTION
       ========================================= */
    .categories-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
    }

    .category-card {
        position: relative;
        height: 300px;
        border-radius: 1.5rem;
        overflow: hidden;
        text-decoration: none;
        color: white;
        transition: all 0.5s var(--ease-out-expo);
    }

    .category-card::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.3) 50%, transparent 100%);
        z-index: 1;
    }

    .category-card::after {
        content: '';
        position: absolute;
        inset: 0;
        background: var(--category-color);
        opacity: 0.4;
        transition: opacity 0.5s ease;
    }

    .category-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: var(--shadow-xl);
    }

    .category-card:hover::after {
        opacity: 0.6;
    }

    .category-content {
        position: relative;
        z-index: 2;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        padding: 2rem;
    }

    .category-icon {
        width: 56px;
        height: 56px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        border-radius: 1rem;
        margin-bottom: 1rem;
        font-size: 1.5rem;
    }

    .category-title {
        font-family: var(--font-heading);
        font-size: 1.75rem;
        font-weight: 800;
        margin-bottom: 0.5rem;
    }

    .category-subtitle {
        font-size: 0.9375rem;
        opacity: 0.85;
        margin-bottom: 1rem;
    }

    .category-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 600;
        font-size: 0.875rem;
        transition: gap 0.3s var(--ease-out-expo);
    }

    .category-card:hover .category-link {
        gap: 1rem;
    }

    /* =========================================
       14. CTA SECTION
       ========================================= */
    .cta {
        position: relative;
        padding: clamp(4rem, 10vw, 6rem) 2rem;
        background: var(--accent-gradient);
        border-radius: 2rem;
        text-align: center;
        color: white;
        overflow: hidden;
    }

    .cta::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -20%;
        width: 60%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%);
        pointer-events: none;
    }

    .cta-content {
        position: relative;
        z-index: 1;
    }

    .cta-title {
        font-family: var(--font-heading);
        font-size: clamp(2rem, 5vw, 3rem);
        font-weight: 800;
        margin-bottom: 1rem;
    }

    .cta-description {
        font-size: clamp(1rem, 1.5vw, 1.125rem);
        opacity: 0.9;
        max-width: 600px;
        margin: 0 auto 2rem;
    }

    .cta-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        justify-content: center;
    }

    .cta-btn-primary {
        background: white;
        color: var(--accent-primary);
    }

    .cta-btn-primary:hover {
        background: rgba(255, 255, 255, 0.9);
        transform: translateY(-2px);
    }

    .cta-btn-secondary {
        background: transparent;
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .cta-btn-secondary:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.5);
    }

    .cta-stats {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 2rem;
        margin-top: 4rem;
        padding-top: 3rem;
        border-top: 1px solid rgba(255, 255, 255, 0.2);
    }

    .cta-stat-value {
        font-family: var(--font-heading);
        font-size: clamp(1.5rem, 3vw, 2.5rem);
        font-weight: 800;
        margin-bottom: 0.25rem;
    }

    .cta-stat-label {
        font-size: 0.8125rem;
        opacity: 0.8;
    }

    /* =========================================
       15. AI CHAT WIDGET
       ========================================= */
    .ai-widget {
        position: fixed;
        bottom: 1.5rem;
        left: 1.5rem;
        z-index: 1000;
    }

    .ai-toggle {
        position: relative;
        width: 56px;
        height: 56px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-card);
        border: 1px solid var(--border-light);
        border-radius: 50%;
        color: var(--accent-primary);
        cursor: pointer;
        box-shadow: var(--shadow-lg);
        transition: all 0.3s var(--ease-out-expo);
    }

    .ai-toggle:hover {
        transform: scale(1.1);
        box-shadow: var(--accent-glow);
    }

    .ai-toggle-pulse {
        position: absolute;
        inset: 0;
        border-radius: 50%;
        background: var(--accent-primary);
        opacity: 0.2;
        animation: pulse-ring 2s infinite;
    }

    @keyframes pulse-ring {
        0% { transform: scale(1); opacity: 0.2; }
        100% { transform: scale(1.5); opacity: 0; }
    }

    .ai-toggle-status {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 8px;
        height: 8px;
        background: #10b981;
        border-radius: 50%;
        animation: pulse-dot 2s infinite;
    }

    .ai-chat {
        position: fixed;
        bottom: 6rem;
        left: 1.5rem;
        width: min(380px, calc(100vw - 3rem));
        height: 450px;
        background: var(--bg-card);
        border: 1px solid var(--border-light);
        border-radius: 1.5rem;
        box-shadow: var(--shadow-xl);
        display: flex;
        flex-direction: column;
        overflow: hidden;
        transform: scale(0);
        opacity: 0;
        transform-origin: bottom left;
        transition: all 0.4s var(--ease-spring);
    }

    .ai-chat.open {
        transform: scale(1);
        opacity: 1;
    }

    .ai-chat-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 1.25rem;
        background: var(--bg-surface);
        border-bottom: 1px solid var(--border-light);
    }

    .ai-chat-title {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-family: var(--font-heading);
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.1em;
    }

    .ai-chat-title-dot {
        width: 8px;
        height: 8px;
        background: var(--accent-primary);
        border-radius: 50%;
        animation: pulse-dot 2s infinite;
    }

    .ai-chat-close {
        background: none;
        border: none;
        color: var(--text-muted);
        cursor: pointer;
        padding: 0.25rem;
        transition: color 0.2s ease;
    }

    .ai-chat-close:hover {
        color: var(--text-primary);
    }

    .ai-chat-messages {
        flex: 1;
        padding: 1rem;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .ai-message {
        display: flex;
        gap: 0.5rem;
        max-width: 85%;
    }

    .ai-message.bot { align-self: flex-start; }
    .ai-message.user { align-self: flex-end; flex-direction: row-reverse; }

    .ai-message-avatar {
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--accent-primary);
        color: white;
        border-radius: 50%;
        font-size: 0.625rem;
        font-weight: 700;
        flex-shrink: 0;
    }

    .ai-message.user .ai-message-avatar {
        background: var(--text-primary);
    }

    .ai-message-bubble {
        padding: 0.75rem 1rem;
        border-radius: 1rem;
        font-size: 0.8125rem;
        line-height: 1.5;
    }

    .ai-message.bot .ai-message-bubble {
        background: var(--bg-surface);
        border-radius: 1rem 1rem 1rem 0.25rem;
    }

    .ai-message.user .ai-message-bubble {
        background: var(--accent-primary);
        color: white;
        border-radius: 1rem 1rem 0.25rem 1rem;
    }

    .ai-typing {
        display: flex;
        gap: 4px;
        padding: 0.75rem 1rem;
    }

    .ai-typing-dot {
        width: 6px;
        height: 6px;
        background: var(--text-muted);
        border-radius: 50%;
        animation: typing-bounce 1.4s infinite ease-in-out both;
    }

    .ai-typing-dot:nth-child(1) { animation-delay: -0.32s; }
    .ai-typing-dot:nth-child(2) { animation-delay: -0.16s; }

    @keyframes typing-bounce {
        0%, 80%, 100% { transform: scale(0.6); }
        40% { transform: scale(1); }
    }

    .ai-chat-input {
        display: flex;
        gap: 0.5rem;
        padding: 1rem;
        border-top: 1px solid var(--border-light);
        background: var(--bg-surface);
    }

    .ai-chat-input input {
        flex: 1;
        padding: 0.75rem 1rem;
        background: var(--bg-card);
        border: 1px solid var(--border-light);
        border-radius: 100px;
        color: var(--text-primary);
        font-size: 0.8125rem;
        font-family: inherit;
        transition: border-color 0.2s ease;
    }

    .ai-chat-input input:focus {
        outline: none;
        border-color: var(--accent-primary);
    }

    .ai-chat-input input::placeholder {
        color: var(--text-muted);
    }

    .ai-chat-send {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--accent-primary);
        border: none;
        border-radius: 50%;
        color: white;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .ai-chat-send:hover {
        background: var(--accent-secondary);
        transform: scale(1.05);
    }

    .ai-chat-send:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
    }

    /* =========================================
       16. THEME TOGGLE
       ========================================= */
    .theme-toggle {
        position: fixed;
        bottom: 1.5rem;
        right: 1.5rem;
        z-index: 1000;
        width: 56px;
        height: 56px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-card);
        border: 1px solid var(--border-light);
        border-radius: 50%;
        color: var(--text-primary);
        cursor: pointer;
        box-shadow: var(--shadow-lg);
        transition: all 0.3s var(--ease-out-expo);
    }

    .theme-toggle:hover {
        transform: rotate(15deg) scale(1.1);
        border-color: var(--accent-primary);
    }

    .theme-toggle i {
        font-size: 1.25rem;
        transition: transform 0.5s var(--ease-spring);
    }

    /* =========================================
       17. SECTION HEADERS
       ========================================= */
    .section-header {
        text-align: center;
        margin-bottom: clamp(3rem, 6vw, 4rem);
    }

    .section-eyebrow {
        display: inline-block;
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        color: var(--accent-primary);
        margin-bottom: 0.75rem;
    }

    .section-title {
        font-family: var(--font-heading);
        font-size: clamp(2rem, 4vw, 3rem);
        font-weight: 800;
        letter-spacing: -0.02em;
        margin-bottom: 1rem;
    }

    .section-description {
        font-size: clamp(1rem, 1.25vw, 1.125rem);
        color: var(--text-secondary);
        max-width: 600px;
        margin: 0 auto;
    }

    /* =========================================
       18. ANIMATIONS
       ========================================= */
    .fade-up {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s var(--ease-out-expo);
    }

    .fade-up.visible {
        opacity: 1;
        transform: translateY(0);
    }

    .stagger-1 { transition-delay: 0.1s; }
    .stagger-2 { transition-delay: 0.2s; }
    .stagger-3 { transition-delay: 0.3s; }
    .stagger-4 { transition-delay: 0.4s; }

    /* =========================================
       19. RESPONSIVE
       ========================================= */
    @media (max-width: 1200px) {
        .lateral-nav { display: none; }

        .specs-card {
            left: 0;
            transform: translateY(-50%) scale(0.9);
        }

        .price-tag {
            right: 0;
            transform: scale(0.9);
        }
    }

    @media (max-width: 1024px) {
        .hero-inner {
            grid-template-columns: 1fr;
            text-align: center;
            gap: 3rem;
        }

        .hero-content {
            padding: 0;
            order: 2;
        }

        .hero-description {
            margin: 0 auto 2rem;
            border-left: none;
            padding-left: 0;
            border-top: 2px solid var(--border-light);
            padding-top: 1.5rem;
        }

        .hero-actions {
            justify-content: center;
        }

        .hero-visual {
            order: 1;
            height: 50vh;
            min-height: 400px;
        }

        .specs-card,
        .price-tag {
            display: none;
        }

        .carousel-controls {
            justify-content: center;
        }

        .cta-stats {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 768px) {
        .hero-slides {
            min-height: 350px;
        }

        .hero-visual {
            height: 40vh;
            min-height: 300px;
        }

        .hero-ring-1 {
            width: 300px;
            height: 300px;
        }

        .hero-ring-2 {
            width: 220px;
            height: 220px;
        }

        .marquee-text {
            font-size: 5rem;
        }

        .products-grid,
        .features-grid,
        .categories-grid {
            grid-template-columns: 1fr;
        }

        .ai-chat {
            width: calc(100vw - 2rem);
            left: 1rem;
            height: 400px;
        }

        .ai-widget {
            bottom: 1rem;
            left: 1rem;
        }

        .theme-toggle {
            bottom: 1rem;
            right: 1rem;
            width: 48px;
            height: 48px;
        }
    }

    @media (max-width: 480px) {
        .hero-title {
            font-size: 2rem;
        }

        .btn {
            padding: 0.875rem 1.5rem;
            font-size: 0.8125rem;
        }

        .marquee-text {
            font-size: 3.5rem;
        }

        .cta-stats {
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .ai-toggle,
        .theme-toggle {
            width: 44px;
            height: 44px;
        }
    }

    /* =========================================
       20. UTILITY CLASSES
       ========================================= */
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        border: 0;
    }

    .bg-surface { background: var(--bg-surface); }
    .text-center { text-align: center; }
    .text-muted { color: var(--text-muted); }
</style>
{% endblock %}

{% block content %}
<!-- Noise Texture -->
<div class="noise-overlay" aria-hidden="true"></div>

<!-- Grid Pattern -->
<div class="grid-pattern" aria-hidden="true"></div>

<!-- Custom Cursor -->
<div class="cursor" id="cursor" aria-hidden="true">
    <div class="cursor-dot"></div>
    <div class="cursor-ring"></div>
</div>

<!-- Aurora Background -->
<div class="aurora-container" aria-hidden="true">
    <div class="aurora-blob aurora-blob-1" id="aurora-1"></div>
    <div class="aurora-blob aurora-blob-2" id="aurora-2"></div>
</div>

<!-- Particles -->
<div class="particles-container" id="particles" aria-hidden="true"></div>

<!-- Theme Toggle -->
<button class="theme-toggle" id="theme-toggle" aria-label="Cambiar tema">
    <i class="fa-solid fa-sun" id="theme-icon"></i>
</button>

<!-- ============================================
     HERO SECTION
     ============================================ -->
<section class="hero">
    <!-- Lateral Navigation -->
    <nav class="lateral-nav lateral-nav-prev" aria-label="Producto anterior">
        <button class="lateral-nav-btn" id="hero-prev" aria-label="Ver producto anterior">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
        </button>
    </nav>

    <nav class="lateral-nav lateral-nav-next" aria-label="Siguiente producto">
        <button class="lateral-nav-btn" id="hero-next" aria-label="Ver siguiente producto">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
        </button>
    </nav>

    <div class="container-xl">
        <div class="hero-inner">
            <!-- Content Side -->
            <div class="hero-content">
                <div class="hero-slides" id="hero-slides" role="region" aria-label="Carrusel de productos destacados">
                    {% if featured_laptops and featured_laptops|length > 0 %}
                        {% for laptop in featured_laptops[:5] %}
                        <article class="hero-slide {% if loop.first %}active{% endif %}"
                                 data-index="{{ loop.index0 }}"
                                 role="group"
                                 aria-roledescription="slide"
                                 aria-label="Producto {{ loop.index }} de {{ featured_laptops[:5]|length }}">

                            <div class="hero-eyebrow">
                                <span class="hero-eyebrow-dot"></span>
                                <span>{{ laptop.brand.name if laptop.brand else 'Premium' }}</span>
                            </div>

                            <h1 class="hero-title">
                                {% set words = laptop.display_name.split() %}
                                <span class="hero-title-line">
                                    <span class="hero-title-text" data-scramble>
                                        {{ words[:2]|join(' ') if words|length >= 2 else laptop.display_name }}
                                    </span>
                                </span>
                                <span class="hero-title-line">
                                    <span class="hero-title-text dynamic-gradient" data-scramble>
                                        {{ words[2:]|join(' ') if words|length > 2 else 'Premium Edition' }}
                                    </span>
                                </span>
                            </h1>

                            <p class="hero-description">
                                {{ laptop.description|truncate(150) if laptop.description else 'Experimenta el máximo rendimiento con tecnología de última generación. Diseño premium, potencia sin límites.' }}
                            </p>

                            <div class="hero-actions">
                                <a href="{{ url_for('public.product_detail', id=laptop.id) }}" class="btn btn-primary">
                                    Comprar Ahora
                                    <i class="fa-solid fa-arrow-right"></i>
                                </a>
                                <a href="#featured" class="btn btn-secondary">
                                    Ver Destacados
                                </a>
                            </div>
                        </article>
                        {% endfor %}
                    {% else %}
                        <article class="hero-slide active">
                            <div class="hero-eyebrow">
                                <span class="hero-eyebrow-dot"></span>
                                <span>LuxeraRD</span>
                            </div>
                            <h1 class="hero-title">
                                <span class="hero-title-line">
                                    <span class="hero-title-text" data-scramble>Potencia que</span>
                                </span>
                                <span class="hero-title-line">
                                    <span class="hero-title-text dynamic-gradient" data-scramble>desafía la realidad</span>
                                </span>
                            </h1>
                            <p class="hero-description">
                                Descubre las mejores laptops y equipos de computación en República Dominicana. Garantía oficial y soporte técnico especializado.
                            </p>
                            <div class="hero-actions">
                                <a href="{{ url_for('public.catalog') }}" class="btn btn-primary">
                                    Ver Catálogo
                                    <i class="fa-solid fa-arrow-right"></i>
                                </a>
                            </div>
                        </article>
                    {% endif %}
                </div>

                <!-- Carousel Controls -->
                <div class="carousel-controls">
                    <div class="carousel-dots" id="carousel-dots" role="tablist" aria-label="Seleccionar producto">
                        <!-- Generated by JS -->
                    </div>
                    <div class="carousel-nav">
                        <button class="carousel-btn" id="carousel-prev" aria-label="Producto anterior">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                            </svg>
                        </button>
                        <button class="carousel-btn" id="carousel-next" aria-label="Siguiente producto">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Visual Side -->
            <div class="hero-visual">
                <div class="hero-rings" aria-hidden="true">
                    <div class="hero-ring hero-ring-1"></div>
                    <div class="hero-ring hero-ring-2"></div>
                </div>

                <div class="hero-product" id="hero-products">
                    {% if featured_laptops and featured_laptops|length > 0 %}
                        {% for laptop in featured_laptops[:5] %}
                        <div class="hero-product-card {% if loop.first %}active{% endif %}" data-index="{{ loop.index0 }}">

                            <!-- Specs Card -->
                            <div class="specs-card">
                                <div class="specs-card-header">
                                    <div class="specs-card-icon">
                                        <i class="fa-solid fa-microchip"></i>
                                    </div>
                                    <div>
                                        <div class="specs-card-subtitle">Sistema</div>
                                        <div class="specs-card-title">Rendimiento</div>
                                    </div>
                                </div>
                                <div class="specs-grid">
                                    <div class="spec-item">
                                        <div class="spec-label">CPU</div>
                                        <div class="spec-value">{{ (laptop.processor.name|truncate(12, True, '')) if laptop.processor else 'Intel i9' }}</div>
                                    </div>
                                    <div class="spec-item">
                                        <div class="spec-label">GPU</div>
                                        <div class="spec-value">{{ (laptop.graphics_card.name|truncate(12, True, '')) if laptop.graphics_card else 'RTX 4090' }}</div>
                                    </div>
                                    <div class="spec-item">
                                        <div class="spec-label">RAM</div>
                                        <div class="spec-value">{{ laptop.ram.name if laptop.ram else '32 GB' }}</div>
                                    </div>
                                    <div class="spec-item">
                                        <div class="spec-label">SSD</div>
                                        <div class="spec-value">{{ laptop.storage.name if laptop.storage else '1 TB' }}</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Product Image -->
                            {% if laptop.images and laptop.images|selectattr('is_cover', 'equalto', True)|list|length > 0 %}
                                {% set cover = laptop.images|selectattr('is_cover', 'equalto', True)|first %}
                                <img src="{{ url_for('static', filename=cover.image_path) }}"
                                     alt="{{ laptop.display_name }}"
                                     class="hero-product-image"
                                     loading="{% if loop.first %}eager{% else %}lazy{% endif %}">
                            {% elif laptop.images and laptop.images|length > 0 %}
                                <img src="{{ url_for('static', filename=laptop.images[0].image_path) }}"
                                     alt="{{ laptop.display_name }}"
                                     class="hero-product-image"
                                     loading="{% if loop.first %}eager{% else %}lazy{% endif %}">
                            {% else %}
                                <div style="display: flex; align-items: center; justify-content: center; width: 100%; aspect-ratio: 16/10;">
                                    <i class="fas fa-laptop" style="font-size: 6rem; color: var(--text-muted);"></i>
                                </div>
                            {% endif %}

                            <!-- Price Tag -->
                            <div class="price-tag">
                                <div>
                                    <div class="price-tag-label">Desde</div>
                                    <div class="price-tag-value">RD$ {{ "{:,.0f}".format(laptop.sale_price) }}</div>
                                </div>
                                <div class="price-tag-indicator"></div>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="hero-product-card active">
                            <div style="display: flex; align-items: center; justify-content: center; width: 100%; aspect-ratio: 16/10;">
                                <i class="fas fa-laptop" style="font-size: 6rem; color: var(--text-muted);"></i>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Marquee -->
    <div class="marquee" aria-hidden="true">
        <div class="marquee-track" id="marquee-track">
            <!-- Generated by JS -->
        </div>
    </div>
</section>

<!-- ============================================
     PRODUCTOS DESTACADOS
     ============================================ -->
<section id="featured" class="section-padding bg-surface">
    <div class="container-xl">
        <header class="section-header fade-up">
            <span class="section-eyebrow">Selección Premium</span>
            <h2 class="section-title">
                Lo más <span class="text-gradient">Vendido</span>
            </h2>
            <p class="section-description">
                Las laptops más vendidas con el mejor rendimiento y precio del mercado dominicano.
            </p>
        </header>

        <div class="products-grid">
            {% if featured_laptops %}
                {% for laptop in featured_laptops[:4] %}
                <article class="product-card fade-up stagger-{{ loop.index }}">
                    <!-- Badge -->
                    <div class="product-card-badge">
                        {% if loop.index == 1 %}
                            <span class="badge badge-new">Nuevo</span>
                        {% elif loop.index == 2 %}
                            <span class="badge badge-hot">Oferta</span>
                        {% elif loop.index == 3 %}
                            <span class="badge badge-featured">Destacado</span>
                        {% else %}
                            <span class="badge badge-featured">Popular</span>
                        {% endif %}
                    </div>

                    {% if laptop.quantity <= 5 and laptop.quantity > 0 %}
                        <div class="product-card-badge" style="top: 3.5rem;">
                            <span class="badge badge-limited">Últimas unidades</span>
                        </div>
                    {% endif %}

                    <!-- Image -->
                    <div class="product-image-container">
                        {% if laptop.images and laptop.images|selectattr('is_cover', 'equalto', True)|list|length > 0 %}
                            {% set cover = laptop.images|selectattr('is_cover', 'equalto', True)|first %}
                            <img src="{{ url_for('static', filename=cover.image_path) }}"
                                 alt="{{ laptop.display_name }}"
                                 class="product-image"
                                 loading="lazy">
                        {% elif laptop.images and laptop.images|length > 0 %}
                            <img src="{{ url_for('static', filename=laptop.images[0].image_path) }}"
                                 alt="{{ laptop.display_name }}"
                                 class="product-image"
                                 loading="lazy">
                        {% else %}
                            <i class="fas fa-laptop" style="font-size: 4rem; color: var(--text-muted);"></i>
                        {% endif %}
                    </div>

                    <!-- Info -->
                    <div class="product-info">
                        <span class="product-brand">{{ laptop.brand.name if laptop.brand else 'Premium' }}</span>
                        <h3 class="product-name">{{ laptop.display_name|truncate(35) }}</h3>

                        <!-- Specs -->
                        <div class="product-specs">
                            {% if laptop.processor %}
                            <div class="product-spec">
                                <span class="product-spec-icon"><i class="fa-solid fa-microchip"></i></span>
                                <span class="product-spec-text">{{ laptop.processor.name|truncate(28) }}</span>
                            </div>
                            {% endif %}
                            {% if laptop.graphics_card %}
                            <div class="product-spec">
                                <span class="product-spec-icon"><i class="fa-solid fa-gamepad"></i></span>
                                <span class="product-spec-text">{{ laptop.graphics_card.name|truncate(28) }}</span>
                            </div>
                            {% endif %}
                            {% if laptop.ram %}
                            <div class="product-spec">
                                <span class="product-spec-icon"><i class="fa-solid fa-memory"></i></span>
                                <span class="product-spec-text">{{ laptop.ram.name }}</span>
                            </div>
                            {% endif %}
                        </div>

                        <!-- Footer -->
                        <footer class="product-footer">
                            <div class="product-price">
                                {% if laptop.discount_price and laptop.discount_price < laptop.sale_price %}
                                    <span class="product-price-old">RD$ {{ "{:,.0f}".format(laptop.sale_price) }}</span>
                                    <span class="product-price-current">
                                        <span class="product-price-currency">RD$</span> {{ "{:,.0f}".format(laptop.discount_price) }}
                                    </span>
                                {% else %}
                                    <span class="product-price-current">
                                        <span class="product-price-currency">RD$</span> {{ "{:,.0f}".format(laptop.sale_price) }}
                                    </span>
                                {% endif %}
                            </div>
                            <a href="{{ url_for('public.product_detail', id=laptop.id) }}"
                               class="product-action"
                               aria-label="Ver detalles de {{ laptop.display_name }}">
                                <i class="fa-solid fa-arrow-right"></i>
                            </a>
                        </footer>
                    </div>
                </article>
                {% endfor %}
            {% endif %}
        </div>

        <div class="text-center fade-up" style="margin-top: 3rem;">
            <a href="{{ url_for('public.catalog') }}" class="btn btn-secondary">
                Ver Todos los Productos
                <i class="fa-solid fa-arrow-right"></i>
            </a>
        </div>
    </div>
</section>

<!-- ============================================
     POR QUÉ ELEGIRNOS
     ============================================ -->
<section class="section-padding">
    <div class="container-xl">
        <header class="section-header fade-up">
            <span class="section-eyebrow">Beneficios</span>
            <h2 class="section-title">
                ¿Por Qué <span class="text-gradient">Elegirnos?</span>
            </h2>
            <p class="section-description">
                Más que productos. Una experiencia completa con garantías y soporte de primer nivel.
            </p>
        </header>

        <div class="features-grid">
            <article class="feature-card fade-up stagger-1">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3 class="feature-title">Garantía Oficial</h3>
                <p class="feature-description">
                    Todos nuestros productos incluyen garantía de fábrica de 1 año con cobertura completa.
                </p>
            </article>

            <article class="feature-card fade-up stagger-2">
                <div class="feature-icon">
                    <i class="fas fa-shipping-fast"></i>
                </div>
                <h3 class="feature-title">Envío Gratis</h3>
                <p class="feature-description">
                    Entrega rápida y segura en toda República Dominicana sin costo adicional.
                </p>
            </article>

            <article class="feature-card fade-up stagger-3">
                <div class="feature-icon">
                    <i class="fas fa-headset"></i>
                </div>
                <h3 class="feature-title">Soporte 24/7</h3>
                <p class="feature-description">
                    Equipo técnico especializado disponible para ayudarte en cualquier momento.
                </p>
            </article>

            <article class="feature-card fade-up stagger-4">
                <div class="feature-icon">
                    <i class="fas fa-tags"></i>
                </div>
                <h3 class="feature-title">Mejores Precios</h3>
                <p class="feature-description">
                    Precios competitivos con opciones de financiamiento flexibles para todos.
                </p>
            </article>
        </div>
    </div>
</section>

<!-- ============================================
     CATEGORÍAS
     ============================================ -->
<section class="section-padding bg-surface">
    <div class="container-xl">
        <header class="section-header fade-up">
            <h2 class="section-title">
                Compra por <span class="text-gradient">Categoría</span>
            </h2>
            <p class="section-description">
                Encuentra exactamente lo que necesitas según tu uso y presupuesto.
            </p>
        </header>

        <div class="categories-grid">
            <a href="{{ url_for('public.catalog', category='gaming') }}"
               class="category-card fade-up stagger-1"
               style="--category-color: linear-gradient(135deg, #7c3aed, #ec4899);">
                <div class="category-content">
                    <div class="category-icon">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <h3 class="category-title">Gaming</h3>
                    <p class="category-subtitle">Máximo rendimiento para juegos</p>
                    <span class="category-link">
                        Explorar <i class="fas fa-chevron-right"></i>
                    </span>
                </div>
            </a>

            <a href="{{ url_for('public.catalog', category='workstation') }}"
               class="category-card fade-up stagger-2"
               style="--category-color: linear-gradient(135deg, #0066ff, #00d4aa);">
                <div class="category-content">
                    <div class="category-icon">
                        <i class="fas fa-briefcase"></i>
                    </div>
                    <h3 class="category-title">Profesional</h3>
                    <p class="category-subtitle">Para trabajo y productividad</p>
                    <span class="category-link">
                        Explorar <i class="fas fa-chevron-right"></i>
                    </span>
                </div>
            </a>

            <a href="{{ url_for('public.catalog', category='laptop') }}"
               class="category-card fade-up stagger-3"
               style="--category-color: linear-gradient(135deg, #10b981, #0ea5e9);">
                <div class="category-content">
                    <div class="category-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h3 class="category-title">Estudiantes</h3>
                    <p class="category-subtitle">Perfectas para estudio y tareas</p>
                    <span class="category-link">
                        Explorar <i class="fas fa-chevron-right"></i>
                    </span>
                </div>
            </a>
        </div>
    </div>
</section>

<!-- ============================================
     CTA
     ============================================ -->
<section class="section-padding">
    <div class="container-xl">
        <div class="cta fade-up">
            <div class="cta-content">
                <h2 class="cta-title">¿Listo para el Upgrade?</h2>
                <p class="cta-description">
                    No te conformes con menos. Únete a la élite tecnológica de República Dominicana.
                </p>
                <div class="cta-actions">
                    <a href="{{ url_for('public.catalog') }}" class="btn cta-btn-primary">
                        <i class="fas fa-shopping-bag"></i>
                        Ver Catálogo
                    </a>
                    <a href="{{ url_for('main.contact') }}" class="btn cta-btn-secondary">
                        <i class="fas fa-phone"></i>
                        Contactar
                    </a>
                </div>

                <div class="cta-stats">
                    <div>
                        <div class="cta-stat-value">{{ total_products|default(500) }}+</div>
                        <div class="cta-stat-label">Productos</div>
                    </div>
                    <div>
                        <div class="cta-stat-value">1,000+</div>
                        <div class="cta-stat-label">Clientes</div>
                    </div>
                    <div>
                        <div class="cta-stat-value">5★</div>
                        <div class="cta-stat-label">Calificación</div>
                    </div>
                    <div>
                        <div class="cta-stat-value">24/7</div>
                        <div class="cta-stat-label">Soporte</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ============================================
     AI CHAT WIDGET
     ============================================ -->
<div class="ai-widget">
    <button class="ai-toggle" id="ai-toggle" aria-label="Abrir asistente AI">
        <div class="ai-toggle-pulse"></div>
        <i class="fa-solid fa-bolt"></i>
        <div class="ai-toggle-status"></div>
    </button>

    <div class="ai-chat" id="ai-chat" role="dialog" aria-label="Chat con asistente AI">
        <header class="ai-chat-header">
            <div class="ai-chat-title">
                <span class="ai-chat-title-dot"></span>
                LUXERA AI ✨
            </div>
            <button class="ai-chat-close" id="ai-close" aria-label="Cerrar chat">
                <i class="fa-solid fa-times"></i>
            </button>
        </header>

        <div class="ai-chat-messages" id="ai-messages">
            <div class="ai-message bot">
                <div class="ai-message-avatar">AI</div>
                <div class="ai-message-bubble">
                    ¡Hola! Soy LUXERA AI, tu asistente de tecnología premium. ¿En qué puedo ayudarte hoy?
                </div>
            </div>
        </div>

        <form class="ai-chat-input" id="ai-form">
            <input type="text"
                   id="ai-input"
                   placeholder="Pregunta sobre laptops, specs o precios..."
                   autocomplete="off">
            <button type="submit" class="ai-chat-send" id="ai-send" aria-label="Enviar mensaje">
                <i class="fa-solid fa-paper-plane"></i>
            </button>
        </form>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
(function() {
    'use strict';

    // =========================================
    // 1. THEME MANAGEMENT
    // =========================================
    const ThemeManager = {
        init() {
            this.toggle = document.getElementById('theme-toggle');
            this.icon = document.getElementById('theme-icon');
            this.html = document.documentElement;

            // Load saved theme
            const saved = localStorage.getItem('theme') || 'light';
            this.setTheme(saved, false);

            // Event listener
            this.toggle?.addEventListener('click', () => this.toggleTheme());
        },

        setTheme(theme, animate = true) {
            this.html.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);

            if (this.icon) {
                this.icon.className = theme === 'dark' ? 'fa-solid fa-moon' : 'fa-solid fa-sun';
                if (animate) {
                    this.icon.style.transform = 'rotate(360deg)';
                    setTimeout(() => this.icon.style.transform = '', 500);
                }
            }

            // Update carousel colors if exists
            if (window.HeroCarousel?.instance) {
                window.HeroCarousel.instance.updateColors();
            }
        },

        toggleTheme() {
            const current = this.html.getAttribute('data-theme');
            this.setTheme(current === 'dark' ? 'light' : 'dark');
        }
    };

    // =========================================
    // 2. CUSTOM CURSOR
    // =========================================
    const CustomCursor = {
        init() {
            this.cursor = document.getElementById('cursor');
            if (!this.cursor || !window.matchMedia('(hover: hover)').matches) return;

            this.dot = this.cursor.querySelector('.cursor-dot');
            this.ring = this.cursor.querySelector('.cursor-ring');

            let mouseX = 0, mouseY = 0;
            let cursorX = 0, cursorY = 0;

            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });

            const animate = () => {
                cursorX += (mouseX - cursorX) * 0.15;
                cursorY += (mouseY - cursorY) * 0.15;

                this.cursor.style.transform = `translate(${cursorX}px, ${cursorY}px)`;
                requestAnimationFrame(animate);
            };
            animate();

            // Hover states
            const interactives = 'a, button, .btn, .product-card, .feature-card, .category-card';
            document.querySelectorAll(interactives).forEach(el => {
                el.addEventListener('mouseenter', () => this.cursor.classList.add('hovering'));
                el.addEventListener('mouseleave', () => this.cursor.classList.remove('hovering'));
            });
        }
    };

    // =========================================
    // 3. PARTICLES
    // =========================================
    const Particles = {
        init() {
            const container = document.getElementById('particles');
            if (!container) return;

            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                const size = Math.random() * 3 + 1;
                particle.style.cssText = `
                    width: ${size}px;
                    height: ${size}px;
                    left: ${Math.random() * 100}vw;
                    top: ${Math.random() * 100}vh;
                    --tx: ${(Math.random() - 0.5) * 100}px;
                    --ty: ${(Math.random() - 0.5) * 100}px;
                    --duration: ${10 + Math.random() * 20}s;
                    --delay: ${Math.random() * -20}s;
                `;
                container.appendChild(particle);
            }
        }
    };

    // =========================================
    // 4. MARQUEE
    // =========================================
    const Marquee = {
        init() {
            const track = document.getElementById('marquee-track');
            if (!track) return;

            const words = ['LUXERA', 'TECNOLOGÍA', 'INNOVACIÓN', 'PREMIUM', 'CALIDAD'];
            track.innerHTML = [...words, ...words].map(w =>
                `<span class="marquee-text">${w}</span>`
            ).join('');
        }
    };

    // =========================================
    // 5. AURORA BACKGROUND
    // =========================================
    const Aurora = {
        init() {
            this.blob1 = document.getElementById('aurora-1');
            this.blob2 = document.getElementById('aurora-2');
            if (!this.blob1 || !this.blob2) return;

            let mouseX = 0.5, mouseY = 0.5;

            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX / window.innerWidth;
                mouseY = e.clientY / window.innerHeight;
            });

            const animate = () => {
                const x1 = (mouseX - 0.5) * 30;
                const y1 = (mouseY - 0.5) * 30;

                this.blob1.style.transform = `translate(${x1}px, ${y1}px)`;
                this.blob2.style.transform = `translate(${-x1 * 0.7}px, ${-y1 * 0.7}px)`;

                requestAnimationFrame(animate);
            };
            animate();
        }
    };

    // =========================================
    // 6. HERO CAROUSEL
    // =========================================
    const HeroCarousel = {
        instance: null,

        init() {
            const textSlides = document.querySelectorAll('.hero-slide');
            const imageCards = document.querySelectorAll('.hero-product-card');
            const dotsContainer = document.getElementById('carousel-dots');

            if (!textSlides.length || !dotsContainer) return;

            this.instance = {
                current: 0,
                total: Math.min(textSlides.length, 5),
                textSlides,
                imageCards,
                dotsContainer,
                autoplayInterval: null,
                progressInterval: null,
                progress: 0,
                duration: 6000,
                isAnimating: false,
                colorSchemes: {
                    light: [
                        { gradient: 'linear-gradient(135deg, #0066ff 0%, #00d4aa 100%)', accent: '#0066ff', rgb: '0, 102, 255' },
                        { gradient: 'linear-gradient(135deg, #7c3aed 0%, #ec4899 100%)', accent: '#7c3aed', rgb: '124, 58, 237' },
                        { gradient: 'linear-gradient(135deg, #10b981 0%, #0ea5e9 100%)', accent: '#10b981', rgb: '16, 185, 129' },
                        { gradient: 'linear-gradient(135deg, #f59e0b 0%, #ef4444 100%)', accent: '#f59e0b', rgb: '245, 158, 11' },
                        { gradient: 'linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%)', accent: '#06b6d4', rgb: '6, 182, 212' }
                    ],
                    dark: [
                        { gradient: 'linear-gradient(135deg, #3b82f6 0%, #10b981 100%)', accent: '#3b82f6', rgb: '59, 130, 246' },
                        { gradient: 'linear-gradient(135deg, #a78bfa 0%, #f472b6 100%)', accent: '#a78bfa', rgb: '167, 139, 250' },
                        { gradient: 'linear-gradient(135deg, #34d399 0%, #38bdf8 100%)', accent: '#34d399', rgb: '52, 211, 153' },
                        { gradient: 'linear-gradient(135deg, #fbbf24 0%, #f87171 100%)', accent: '#fbbf24', rgb: '251, 191, 36' },
                        { gradient: 'linear-gradient(135deg, #22d3ee 0%, #60a5fa 100%)', accent: '#22d3ee', rgb: '34, 211, 238' }
                    ]
                },

                updateColors() {
                    const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
                    const schemes = isDark ? this.colorSchemes.dark : this.colorSchemes.light;
                    const scheme = schemes[this.current % schemes.length];

                    document.documentElement.style.setProperty('--dynamic-gradient', scheme.gradient);
                    document.documentElement.style.setProperty('--dynamic-accent', scheme.accent);
                    document.documentElement.style.setProperty('--dynamic-accent-rgb', scheme.rgb);
                },

                goTo(index, skipAnimation = false) {
                    if (this.isAnimating || index === this.current) return;
                    if (!skipAnimation) this.isAnimating = true;

                    // Update slides
                    this.textSlides.forEach((slide, i) => {
                        slide.classList.toggle('active', i === index);
                    });

                    this.imageCards.forEach((card, i) => {
                        card.classList.toggle('active', i === index);
                    });

                    // Update dots
                    this.dotsContainer.querySelectorAll('.carousel-dot').forEach((dot, i) => {
                        dot.classList.toggle('active', i === index);
                        if (i !== index) {
                            dot.querySelector('.carousel-dot-fill').style.width = '0%';
                        }
                    });

                    this.current = index;
                    this.updateColors();
                    this.resetProgress();

                    setTimeout(() => this.isAnimating = false, 800);
                },

                next() {
                    this.goTo((this.current + 1) % this.total);
                },

                prev() {
                    this.goTo((this.current - 1 + this.total) % this.total);
                },

                resetProgress() {
                    this.progress = 0;
                    this.updateProgressBar(0);
                },

                updateProgressBar(val) {
                    const activeDot = this.dotsContainer.querySelector('.carousel-dot.active .carousel-dot-fill');
                    if (activeDot) activeDot.style.width = `${val}%`;
                },

                startAutoplay() {
                    this.stopAutoplay();
                    this.resetProgress();

                    this.progressInterval = setInterval(() => {
                        this.progress += 100 / (this.duration / 100);
                        if (this.progress >= 100) {
                            this.next();
                        } else {
                            this.updateProgressBar(this.progress);
                        }
                    }, 100);
                },

                stopAutoplay() {
                    clearInterval(this.progressInterval);
                }
            };

            // Create dots
            for (let i = 0; i < this.instance.total; i++) {
                const dot = document.createElement('button');
                dot.className = `carousel-dot${i === 0 ? ' active' : ''}`;
                dot.setAttribute('role', 'tab');
                dot.setAttribute('aria-label', `Producto ${i + 1}`);
                dot.innerHTML = '<span class="carousel-dot-fill"></span>';
                dot.addEventListener('click', () => this.instance.goTo(i));
                dotsContainer.appendChild(dot);
            }

            // Event listeners
            ['carousel-prev', 'hero-prev'].forEach(id => {
                document.getElementById(id)?.addEventListener('click', () => {
                    this.instance.prev();
                    this.instance.startAutoplay();
                });
            });

            ['carousel-next', 'hero-next'].forEach(id => {
                document.getElementById(id)?.addEventListener('click', () => {
                    this.instance.next();
                    this.instance.startAutoplay();
                });
            });

            // Pause on hover
            const hero = document.querySelector('.hero');
            hero?.addEventListener('mouseenter', () => this.instance.stopAutoplay());
            hero?.addEventListener('mouseleave', () => this.instance.startAutoplay());

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') this.instance.prev();
                if (e.key === 'ArrowRight') this.instance.next();
            });

            // Initialize
            this.instance.updateColors();
            this.instance.startAutoplay();

            // Make accessible globally
            window.HeroCarousel = HeroCarousel;
        }
    };

    // =========================================
    // 7. AI CHAT
    // =========================================
    const AIChat = {
        init() {
            this.toggle = document.getElementById('ai-toggle');
            this.chat = document.getElementById('ai-chat');
            this.close = document.getElementById('ai-close');
            this.form = document.getElementById('ai-form');
            this.input = document.getElementById('ai-input');
            this.messages = document.getElementById('ai-messages');
            this.send = document.getElementById('ai-send');

            if (!this.toggle || !this.chat) return;

            this.toggle.addEventListener('click', () => this.openChat());
            this.close.addEventListener('click', () => this.closeChat());
            this.form.addEventListener('submit', (e) => this.handleSubmit(e));

            // Close on escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') this.closeChat();
            });
        },

        openChat() {
            this.chat.classList.add('open');
            this.input.focus();
        },

        closeChat() {
            this.chat.classList.remove('open');
        },

        async handleSubmit(e) {
            e.preventDefault();
            const text = this.input.value.trim();
            if (!text) return;

            this.addMessage(text, 'user');
            this.input.value = '';
            this.send.disabled = true;

            // Show typing
            const typingId = this.showTyping();

            // Simulate response
            setTimeout(() => {
                this.hideTyping(typingId);
                const responses = [
                    "Nuestra serie premium ofrece procesadores de última generación con hasta 64GB de RAM.",
                    "Todos nuestros productos incluyen garantía oficial de 1 año.",
                    "Tenemos envío gratis a todo el país. ¿Te interesa algún modelo?",
                    "Para gaming recomendamos nuestra línea con RTX 40-series.",
                    "Puedes visitar nuestro catálogo para ver todas las opciones disponibles."
                ];
                this.addMessage(responses[Math.floor(Math.random() * responses.length)], 'bot');
                this.send.disabled = false;
            }, 1200);
        },

        addMessage(text, sender) {
            const msg = document.createElement('div');
            msg.className = `ai-message ${sender}`;
            msg.innerHTML = `
                <div class="ai-message-avatar">${sender === 'bot' ? 'AI' : 'Tú'}</div>
                <div class="ai-message-bubble">${text}</div>
            `;
            this.messages.appendChild(msg);
            this.messages.scrollTop = this.messages.scrollHeight;
        },

        showTyping() {
            const id = `typing-${Date.now()}`;
            const typing = document.createElement('div');
            typing.id = id;
            typing.className = 'ai-message bot';
            typing.innerHTML = `
                <div class="ai-message-avatar">AI</div>
                <div class="ai-message-bubble">
                    <div class="ai-typing">
                        <span class="ai-typing-dot"></span>
                        <span class="ai-typing-dot"></span>
                        <span class="ai-typing-dot"></span>
                    </div>
                </div>
            `;
            this.messages.appendChild(typing);
            this.messages.scrollTop = this.messages.scrollHeight;
            return id;
        },

        hideTyping(id) {
            document.getElementById(id)?.remove();
        }
    };

    // =========================================
    // 8. SCROLL ANIMATIONS
    // =========================================
    const ScrollAnimations = {
        init() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

            document.querySelectorAll('.fade-up').forEach(el => observer.observe(el));
        }
    };

    // =========================================
    // 9. TEXT SCRAMBLE EFFECT (Optimized)
    // =========================================
    const TextScramble = {
        chars: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',

        scramble(element) {
            const originalText = element.textContent;
            const length = originalText.length;
            let iteration = 0;

            const interval = setInterval(() => {
                element.textContent = originalText
                    .split('')
                    .map((char, i) => {
                        if (i < iteration) return originalText[i];
                        return this.chars[Math.floor(Math.random() * this.chars.length)];
                    })
                    .join('');

                if (iteration >= length) clearInterval(interval);
                iteration += 1/2;
            }, 30);
        },

        init() {
            document.querySelectorAll('[data-scramble]').forEach(el => {
                // Scramble on load for visible elements
                if (el.closest('.hero-slide.active')) {
                    setTimeout(() => this.scramble(el), 300);
                }
            });
        }
    };

    // =========================================
    // INITIALIZE ALL
    // =========================================
    document.addEventListener('DOMContentLoaded', () => {
        ThemeManager.init();
        CustomCursor.init();
        Particles.init();
        Marquee.init();
        Aurora.init();
        HeroCarousel.init();
        AIChat.init();
        ScrollAnimations.init();
        TextScramble.init();
    });

})();
</script>
{% endblock %}